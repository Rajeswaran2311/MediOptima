<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MediOptima</title>
    <link rel="icon" href="./static/images/heart-pulse-solid.svg">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css"
        integrity="sha512-DTOQO9RWCH3ppGqcWaEA1BIZOC6xxalwEsw9c2QQeAIftl+Vegovlnee1c9QX4TctnWMn13TZye+giMm8e2LwA=="
        crossorigin="anonymous" referrerpolicy="no-referrer" />
    <link rel="stylesheet" href="./static/css/style.css">
    <style>
        .prediction-form {
            flex: 1 1 45rem;
            text-align: center;
            padding: 2rem;
            border-radius: .5rem;
        }

        .prediction-form .box {
            width: 100%;
            margin: .7rem 0;
            border-radius: .5rem;
            border: var(--border);
            font-size: 1.6rem;
            color: var(--black);
            text-transform: none;
            padding: 1rem;
        }
    </style>
</head>

<body>
    <header class="header">
        <a href="{{url_for('index')}}" class="logo"><i class="fas fa-heartbeat"></i> MediOptima</a>
        <nav class="navbar">
            {% if username %}
            <a href="{{url_for('index')}}#home">Home</a>
            <a href="{{url_for('index')}}#scans">Scans</a>
            <a href="{{url_for('chatbot')}}">Chatbot</a>
            <a href="{{url_for('profile')}}"><span class="fas fa-user"></span></a>
            {% else %}
            <a href="{{url_for('login')}}">Login</a>
            {% endif %}
        </nav>

        <div id="menu-btn" class="fas fa-bars"></div>

    </header>
    <h1 class="heading" style="margin-bottom: -10rem; margin-top: 8rem;"> <span>Pneumonia </span> Detection</h1>
    <section class="book" id="book">
        

        <div class="glass-row" style="margin-top:100px;">
            <div class="prediction-form">
                <a href="{{url_for('index')}}" class="logo"><i class="fas fa-heartbeat"></i> MediOptima</a><br><br>
                <div class="box">
                <div class="label" id="label-container"></div>
    
    <!-- Hidden File Input -->
                <input class="file-input" type="file" id="file" accept="image/*" hidden>

                <div class="img-area" data-img="">
                    <i class="fa-solid fa-upload"></i>
                    <h3>Upload Image</h3>
                    <p>Image size must be less than <span>2MB</span></p>
                </div>
                <button class="select-image btn" style="background-color: rgba(255, 255, 255, 0);">Select Image</button>
            </div>

            <form id="uploadForm" action="{{url_for('resultp')}}" method="post" enctype="multipart/form-data" style="display: none;">
                <input type="file" name="file" id="hidden-file-input">
            </form>
                <!--  -->
            </div>

        </div>
    </section>
    <section class="footer">

        <div class="credit">made with ðŸ’š | MediOptima @ 2025</div>
    </section>
    <script src="./static/js/script.js"></script>
    <script>
        document.addEventListener("DOMContentLoaded", function () {
            const fileInput = document.getElementById("file");
            const selectImageBtn = document.querySelector(".select-image");
            const uploadForm = document.getElementById("uploadForm");
            const hiddenFileInput = document.getElementById("hidden-file-input");
    
            // Click event to trigger file selection
            selectImageBtn.addEventListener("click", function () {
                fileInput.click();
            });
    
            // When a file is selected, preview it and submit the form
            fileInput.addEventListener("change", function () {
                if (fileInput.files.length > 0) {
                    const file = fileInput.files[0];
    
                    if (file.size <= 2 * 1024 * 1024) { // Ensure file is under 2MB
                        hiddenFileInput.files = fileInput.files; // Assign file to hidden input
                        uploadForm.submit(); // Auto-submit the form
                    } else {
                        alert("File size must be less than 2MB.");
                    }
                }
            });
            // Reset file input when navigating back to the upload page
    window.addEventListener("pageshow", function () {
        fileInput.value = ""; // Reset input when returning to this page
    });
        });
    </script>


</body>

</html>